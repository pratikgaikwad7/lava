<!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<nav class="main-nav">
  <!-- Heading Section -->
  <div class="nav-heading">
    <!-- Left Pill -->
    <div class="location-display">
      <i class="bi bi-geo-alt-fill"></i>
      <span>Pune Plant</span>
    </div>

    <!-- Center Heading -->
    <div class="heading-center">
      <i class="bi bi-speedometer2"></i>
      <span>Learning Health Index</span>
    </div>

    <!-- Right Pills (Role + Logout) -->
    <div class="right-controls">
      <div class="role-display">
        <i class="bi bi-person-circle"></i>
        <span>{{ session.get('role', '') }}</span>
      </div>
      <a href="{{ url_for('user_auth.logout') }}" class="logout-btn">
        <i class="bi bi-box-arrow-right"></i>
        <span>Logout</span>
      </a>
    </div>
  </div>

  <!-- Tabs Row -->
  <div class="nav-container">
    <div class="tabs-wrapper">
      <div class="tabs-container">

        {# Case 1: Admin & senior roles → show ALL tabs #}
        {% if session.get('role') in [
            'Admin','Corporate Skill Development Head','Plant Head',
            'HR Head','ER Officer','Skill Head','PSD Head'
        ] %}
          <a href="{{ url_for('view_bp.view_master_data') }}" 
             class="menu-item {% if request.endpoint == 'view_bp.view_master_data' %}active{% endif %}">
             Technicians Capability Building
          </a>
          <a href="{{ url_for('user_tech_bp.induction_list') }}" 
             class="menu-item {% if request.endpoint == 'user_tech_bp.induction_list' %}active{% endif %}">INDUCTION</a>
          <a href="{{ url_for('user.fst') }}" 
             class="menu-item {% if request.endpoint == 'user.fst' %}active{% endif %}">FST</a>
          <a href="{{ url_for('user.fta') }}" 
             class="menu-item {% if request.endpoint == 'user.fta' %}active{% endif %}">FTA</a>
          <a href="{{ url_for('user.jta_ta') }}" 
             class="menu-item {% if request.endpoint == 'user.jta_ta' %}active{% endif %}">JTA</a>
          <a href="{{ url_for('user.ta') }}" 
             class="menu-item {% if request.endpoint == 'user.ta' %}active{% endif %}">TA</a>
          <a href="{{ url_for('user.kaushalya') }}" 
             class="menu-item {% if request.endpoint == 'user.kaushalya' %}active{% endif %}">KAUSHALYA</a>
          <a href="{{ url_for('user.pragati') }}" 
             class="menu-item {% if request.endpoint == 'user.pragati' %}active{% endif %}">PRAGATI</a>
          <a href="{{ url_for('user.lakshya') }}" 
             class="menu-item {% if request.endpoint == 'user.lakshya' %}active{% endif %}">LAKSHYA</a>
          <a href="{{ url_for('user.live_trainer') }}" 
             class="menu-item {% if request.endpoint == 'user.live_trainer' %}active{% endif %}">LIVE TRAINER</a>
        {% endif %}

        {# Case 2: Factory roles → only key tabs #}
        {% if session.get('role') in [
            'Factory Head','PSD Officer','Shop Floor Training Coordinators'
        ] %}
          <a href="{{ url_for('view_bp.view_master_data') }}" 
             class="menu-item {% if request.endpoint == 'view_bp.view_master_data' %}active{% endif %}">
             Technicians Capability Building
          </a>
          <a href="{{ url_for('factory_data.factory_data') }}" 
             class="menu-item {% if request.endpoint == 'factory_data.factory_data' %}active{% endif %}">
             Training Management
          </a>
        {% endif %}

      </div>
    </div>
  </div>
</nav>

<style>
/* Main Nav */
.main-nav {
  position: fixed;
  top: 0; left: 0; right: 0;
  z-index: 1000;
  background: linear-gradient(135deg, #002d5c, #006bb3);
  border-radius: 0 0 12px 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
  font-family: "Segoe UI", "Roboto", sans-serif;
}

/* Heading */
.nav-heading {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px;
  color: #fff;
  position: relative;
}
.heading-center {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 1.4rem;
  font-weight: 700;
  white-space: nowrap;
}
.heading-center i { font-size: 1.2rem; }

/* Location Pill (Left) */
.location-display {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  color: #fff;
  background: linear-gradient(135deg, #2dff84ff, #29a45cff); /* brighter default */
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.location-display:hover {
  background: linear-gradient(135deg, #27ae60, #34945cff); /* darker hover */
}
.location-display i { font-size: 0.9rem; }

/* Right Controls (Role + Logout) */
.right-controls {
  display: flex;
  align-items: center;
  gap: 10px;
}
.role-display {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 5px 12px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  color: #fff;
  background: linear-gradient(135deg,#2dff84ff, #29a45cff); /* brighter default */
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.role-display:hover {
  background: linear-gradient(135deg, #27ae60, #1e8449); /* darker hover */
}
.role-display i { font-size: 0.9rem; }

/* Logout */
.logout-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  color: #fff;
  background: linear-gradient(135deg, #ff9387ff, #ff5647ff); /* brighter default */
  text-decoration: none;
  transition: 0.25s;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.logout-btn:hover {
  background: linear-gradient(135deg, #ea4937ff, #962d22); /* darker hover */
  transform: translateY(-1px);
}

/* Tabs */
.nav-container {
  display: flex;
  justify-content: center;
  padding: 8px 20px 12px;
}
.tabs-wrapper { flex: 1; }
.tabs-container {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
}

/* Menu Items */
.menu-item {
  padding: 7px 16px;
  border-radius: 18px;
  text-decoration: none;
  color: #fff;
  font-weight: 500;
  font-size: 0.85rem;
  background: linear-gradient(135deg, #2dff84ff, #29a45cff); /* brighter default */
  transition: 0.25s;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.menu-item:hover {
  background: linear-gradient(135deg, #27ae60, #1e8449); /* darker hover */
}
.menu-item.active {
  color: #002d5c;
  background: #f1f9ff;
  font-weight: 600;
  box-shadow: 0 3px 8px rgba(24,119,242,0.35);
}

/* Responsive */
@media (max-width: 900px) {
  .nav-heading { flex-direction: column; gap: 8px; }
  .heading-center {
    position: static;
    transform: none;
    margin-top: 8px;
  }
  .right-controls { justify-content: center; }
  .tabs-container { justify-content: flex-start; overflow-x: auto; white-space: nowrap; }
}
</style>
